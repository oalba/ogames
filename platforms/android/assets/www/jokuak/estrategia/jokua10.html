<HEAD>
<title>Boton manía</title>

<style type="text/css">

<!--

body { background-color: #EEEEEE; color: black }
a { font-weight: bold }
a:link { background-color: #EEEEEE; color: blue }
a:visited { background-color: #EEEEEE; color: blue }
a:active { background-color: #EEEEEE; color: blue }
a:hover { background-color: white; color: maroon}
input { font-family: monospace; font-size: 24px; border-left: 10px; border-right: 10px; border-color: silver; border-style: double }
-->

</style>

<SCRIPT LANGUAGE="JavaScript">

<!-- Begin

var Size = new Number(6);

var Moves = new Array();

function NewGame()

{

	for(i = 0; i < Size * Size; document.forms[0].elements[i++].value = 0);

	for(i = 0; i < 3 + 3 * document.forms[0].Difficulty.selectedIndex; i++)

		NewValue(Math.floor(Math.random() * Size),Math.floor(Math.random() * Size),1);

	Moves.length = document.forms[0].Score.value = 0;

}

function TakeBack(flag)

{

	while(flag-- && (i = Moves.pop()))

		NewValue(parseInt(i.split("-")[0]),parseInt(i.split("-")[1]),1);

	document.forms[0].Score.value = Moves.length;

}

function Clicked(x,y)

{

	NewValue(x,y,3);

	document.forms[0].Score.value = Moves.push(x + "-" + y);

	for(i = 0; i < Size * Size; i++)

		if(parseInt(document.forms[0].elements[i].value))

			return;

	alert((Moves.length <= 3 + 3 * document.forms[0].Difficulty.selectedIndex ? "¡Perfecto!\n" : "") + "Hecho en " + Moves.length + " clicks");

	NewGame();

}

function NewValue(x,y,c)

{

	ChangeValue(x,y,c);
	ChangeValue(x - 1,y,c);
	ChangeValue(x + 1,y,c);
	ChangeValue(x,y - 1,c);
	ChangeValue(x,y + 1,c);

}

function ChangeValue(x,y,c)

{

	if(x >= 0 && x < Size && y >= 0 && y < Size)

		with(document.forms[0].elements[x + Size * y]) value = (parseInt(value) + c) & 3;

}

//  End -->

</script>



</HEAD>

<BODY onLoad="NewGame()" background="../../fondob.jpg">



<p align="center"><b>Botón manía</b></p>

<p><a href="" onClick="NewGame(); return false;" onMouseOver="window.status='Start a new game'; return true;" onMouseOut="window.status=''; return true;" title="Start a new game">Nuevo</a> - <a href="" onClick="TakeBack(-1); return false;" onMouseOver="window.status='Restart the board'; return true;" onMouseOut="window.status=''; return true;" title="Restart the board">Reiniciar</a> - <a href="" onClick="TakeBack(1); return false;" onMouseOver="window.status='Undo last move'; return true;" onMouseOut="window.status=''; return true;" title="Deshacer último movimiento">
Deshacer</a></p>

<form action="" method="get" enctype="application/x-www-form-urlencoded">

<script type="text/javascript">

<!--

for(y = 0; y < Size; y++,window.document.write("<br>"))

	for(x = 0; x < Size; x++)

		window.document.write('<input type="button" value="" onClick="Clicked(' + x + ',' + y + ')">');

// -->

</script>

<p>

Nivel de dificultad: <select name="Difficulty" onChange="NewGame()">

<option>Para tontos</option>
<option>Muy fácil</option>
<option>Fácil</option>
<option>Algo complicado</option>
<option selected>Normal</option>
<option>Durillo</option>
<option>Muy duro</option>
<option>Dificilísimo</option>
<option>Imposible</option>

</select>

</p>

<p>Clicks utilizados: <input type="text" name="Score" value="0" size="3" disabled></p>

</form>

<dl>

<dt><font style="font-size: 9pt; font-weight: 700; background-color: #ffffff">¿Cómo jugar?:</font></dt>

<dd><font style="font-size: 9pt; background-color: #ffffff">Pulsa en alguno de los botones en el tablero<br>para decrementar el valor 
del botón en 1, así </font> </dd>

<dd><font style="font-size: 9pt; background-color: #ffffff">como el valor de los 4 botones de alrededor.</font></dd>

<dt><font style="font-size: 9pt; font-weight: 700; background-color: #ffffff">Objetivo:</font></dt>

<dd><font style="font-size: 9pt; background-color: #ffffff">Poner todos los botones a '0'.</font></dd>
</dl>